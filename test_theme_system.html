<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í†µí•© í…Œë§ˆ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 40px;
            background-color: #f8f9fa;
            transition: background-color 0.3s ease;
        }
        
        body[data-bs-theme="dark"] {
            background-color: #212529;
            color: #adb5bd;
        }
        
        .test-section {
            background: white;
            padding: 30px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        body[data-bs-theme="dark"] .test-section {
            background: #343a40;
            color: #adb5bd;
        }
        
        .theme-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease;
        }
        
        body[data-bs-theme="dark"] .theme-switcher {
            background: #343a40;
            color: #adb5bd;
        }
        
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .component-card {
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            background-color: #fff;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        
        body[data-bs-theme="dark"] .component-card {
            background-color: #495057;
            border-color: #6c757d;
        }
        
        h1, h2, h3 {
            color: #333;
            border-bottom: 2px solid #0d6efd;
            padding-bottom: 10px;
            transition: color 0.3s ease;
        }
        
        body[data-bs-theme="dark"] h1,
        body[data-bs-theme="dark"] h2,
        body[data-bs-theme="dark"] h3 {
            color: #adb5bd;
        }
        
        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .status.success {
            background-color: #d1e7dd;
            color: #0f5132;
            border: 1px solid #a3cfbb;
        }
        
        .status.error {
            background-color: #f8d7da;
            color: #842029;
            border: 1px solid #f1aeb5;
        }
        
        .theme-demo {
            padding: 20px;
            margin: 15px 0;
            border: 1px solid var(--bs-border-color, #dee2e6);
            border-radius: 8px;
            background-color: var(--bs-component-bg, #fff);
        }
        
        .variable-display {
            font-family: monospace;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        body[data-bs-theme="dark"] .variable-display {
            background-color: #495057;
            color: #adb5bd;
        }
    </style>
    <script type="module">
        // CSS ë³€ìˆ˜ ì„¤ì • (common.css ëŒ€ì²´)
        const style = document.createElement('style');
        style.textContent = `
            :root {
                /* Base theme variables will be overridden by ThemeSystem */
                --bs-body-bg: #fff;
                --bs-body-color: #212529;
                --bs-component-bg: #fff;
                --bs-border-color: #dee2e6;
                --bs-border-width: 1px;
                --bs-border-radius: 0.375rem;
                --bs-secondary-color: rgba(33, 37, 41, 0.75);
                --bs-tertiary-bg: #f8f9fa;
                --bs-form-control-disabled-bg: #e9ecef;
                --bs-danger: #dc3545;
                --bs-danger-rgb: 220, 53, 69;
                --bs-danger-text: #842029;
                --bs-success-text: #0f5132;
                --bs-gray-500: #6c757d;
            }
        `;
        document.head.appendChild(style);
        
        // DateUtils ëª¨í‚¹
        class DateUtils {
            static DATE_TYPE = {
                DATE: 'date',
                MONTH: 'month',
                DATETIME: 'datetime'
            };
            
            static getDefaultFormat(dateType) {
                switch (dateType) {
                    case this.DATE_TYPE.DATE: return 'Y-m-d';
                    case this.DATE_TYPE.MONTH: return 'Y-m';
                    case this.DATE_TYPE.DATETIME: return 'Y-m-d H:i';
                    default: return 'Y-m-d';
                }
            }
            
            static getDateFormatRegex(format) {
                const patterns = {
                    'Y-m-d': /^\d{4}-\d{2}-\d{2}$/,
                    'Y-m': /^\d{4}-\d{2}$/,
                    'Y-m-d H:i': /^\d{4}-\d{2}-\d{2} \d{2}:\d{2}$/
                };
                return patterns[format] || patterns['Y-m-d'];
            }
            
            static parseDateStrByFormat(dateStr, format) {
                try {
                    return new Date(dateStr);
                } catch (e) {
                    return null;
                }
            }
        }
        window.DateUtils = DateUtils;
        
        // ì»´í¬ë„ŒíŠ¸ imports
        import './src/components/input/Radio_CSSinJS.js';
        import './src/components/container/LitDatepickerParents_CSSinJS.js';
        
        // í…ŒìŠ¤íŠ¸ìš© ì»´í¬ë„ŒíŠ¸ ë“±ë¡
        customElements.define('l-datepicker-theme', class extends window.LitDatepickerParentsCSSinJS {
            constructor() {
                super();
                this.setDateType(DateUtils.DATE_TYPE.DATE);
            }
        });
        
        // í…Œë§ˆ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
        document.addEventListener('DOMContentLoaded', () => {
            // í…Œë§ˆ ì „í™˜ ë²„íŠ¼ ì„¤ì •
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', () => {
                const body = document.body;
                const currentTheme = body.getAttribute('data-bs-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                if (newTheme === 'dark') {
                    body.setAttribute('data-bs-theme', 'dark');
                    themeToggle.textContent = 'ğŸŒ ë¼ì´íŠ¸ ëª¨ë“œ';
                } else {
                    body.removeAttribute('data-bs-theme');
                    themeToggle.textContent = 'ğŸŒ™ ë‹¤í¬ ëª¨ë“œ';
                }
                
                // CSS ë³€ìˆ˜ ê°’ ì—…ë°ì´íŠ¸
                updateVariableDisplay();
            });
            
            // ì´ˆê¸° ë³€ìˆ˜ í‘œì‹œ
            setTimeout(() => {
                updateVariableDisplay();
                checkThemeSystem();
            }, 2000);
        });
        
        function updateVariableDisplay() {
            const variableDisplay = document.getElementById('css-variables');
            const computedStyles = getComputedStyle(document.documentElement);
            
            const importantVars = [
                '--bs-body-color',
                '--bs-body-bg',
                '--bs-component-bg',
                '--bs-border-color',
                '--bs-form-control-bg',
                '--bs-form-control-border-color',
                '--bs-primary',
                '--bs-danger',
                '--bs-success'
            ];
            
            let display = '';
            importantVars.forEach(varName => {
                const value = computedStyles.getPropertyValue(varName);
                display += `${varName}: ${value || 'undefined'}\\n`;
            });
            
            variableDisplay.textContent = display;
        }
        
        function checkThemeSystem() {
            const statusDiv = document.getElementById('theme-status');
            
            try {
                const radioComponents = document.querySelectorAll('l-radio-cssjs');
                const datepickerComponents = document.querySelectorAll('l-datepicker-theme');
                
                if (radioComponents.length > 0 && datepickerComponents.length > 0) {
                    statusDiv.className = 'status success';
                    statusDiv.innerHTML = `
                        âœ… <strong>í†µí•© í…Œë§ˆ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì„±ê³µ!</strong><br>
                        â€¢ CSS-in-JS ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì •ìƒì ìœ¼ë¡œ ë Œë”ë§ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                        â€¢ í…Œë§ˆ ë³€ìˆ˜ë“¤ì´ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.<br>
                        â€¢ ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì „í™˜ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.
                    `;
                } else {
                    statusDiv.className = 'status error';
                    statusDiv.textContent = 'âŒ ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
                }
            } catch (error) {
                statusDiv.className = 'status error';
                statusDiv.textContent = `âŒ í…Œë§ˆ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`;
            }
        }
    </script>
</head>
<body>
    <div class="theme-switcher">
        <button id="theme-toggle">ğŸŒ™ ë‹¤í¬ ëª¨ë“œ</button>
    </div>

    <h1>ğŸ¨ í†µí•© CSS í…Œë§ˆ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</h1>
    
    <div id="theme-status" class="status">
        â³ í…Œë§ˆ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...
    </div>

    <div class="test-section">
        <h2>ğŸ“Š CSS ì»¤ìŠ¤í…€ í”„ë¡œí¼í‹° ëª¨ë‹ˆí„°ë§</h2>
        <p>í˜„ì¬ ì ìš©ëœ ì£¼ìš” CSS ë³€ìˆ˜ë“¤ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        
        <div class="variable-display" id="css-variables">
            ë³€ìˆ˜ ê°’ ë¡œë”© ì¤‘...
        </div>
        
        <p><strong>í…ŒìŠ¤íŠ¸ ë°©ë²•:</strong> ìœ„ì˜ ë‹¤í¬ ëª¨ë“œ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í…Œë§ˆê°€ ì˜¬ë°”ë¥´ê²Œ ì „í™˜ë˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
    </div>

    <div class="test-section">
        <h2>ğŸ§© í†µí•© ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸</h2>
        <p>ThemeSystemì„ ì ìš©í•œ CSS-in-JS ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¼ê´€ëœ í…Œë§ˆë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
        
        <div class="component-grid">
            <div class="component-card">
                <h3>Radio ì»´í¬ë„ŒíŠ¸</h3>
                <l-radio-cssjs name="theme-test" id="radio1" value="option1" label="ë¼ì´íŠ¸ í…Œë§ˆ" checked></l-radio-cssjs>
                <l-radio-cssjs name="theme-test" id="radio2" value="option2" label="ë‹¤í¬ í…Œë§ˆ"></l-radio-cssjs>
                <l-radio-cssjs name="theme-test" id="radio3" value="option3" label="ìë™ í…Œë§ˆ"></l-radio-cssjs>
            </div>
            
            <div class="component-card">
                <h3>Datepicker ì»´í¬ë„ŒíŠ¸</h3>
                <l-datepicker-theme 
                    id="theme-datepicker" 
                    label="í…Œë§ˆ í…ŒìŠ¤íŠ¸ ë‚ ì§œ" 
                    value="2024-01-15"
                    feedback="í…Œë§ˆê°€ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤"
                    feedback-type="normal">
                </l-datepicker-theme>
            </div>
            
            <div class="component-card">
                <h3>ê²€ì¦ ìƒíƒœ í…ŒìŠ¤íŠ¸</h3>
                <l-datepicker-theme 
                    id="validation-datepicker" 
                    label="í•„ìˆ˜ ë‚ ì§œ ì…ë ¥" 
                    required
                    feedback="í•„ìˆ˜ ì…ë ¥ í•„ë“œì…ë‹ˆë‹¤"
                    feedback-type="error"
                    feedback-visible-type="invalid">
                </l-datepicker-theme>
            </div>
            
            <div class="component-card">
                <h3>í¬ê¸° ë³€í˜• í…ŒìŠ¤íŠ¸</h3>
                <l-radio-cssjs name="size-test" id="radio-sm" value="small" label="Small" size="small"></l-radio-cssjs>
                <br><br>
                <l-datepicker-theme 
                    id="size-datepicker" 
                    label="Large Size" 
                    size="large"
                    value="2024-12-25">
                </l-datepicker-theme>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ í…Œë§ˆ ì‹œìŠ¤í…œ ì¥ì </h2>
        <div class="theme-demo">
            <h3>í†µí•©ëœ CSS ë³€ìˆ˜ ì‹œìŠ¤í…œ</h3>
            <ul>
                <li><strong>ì¼ê´€ì„±:</strong> ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•œ ìƒ‰ìƒ, í¬ê¸°, ê°„ê²© ë³€ìˆ˜ ì‚¬ìš©</li>
                <li><strong>ìœ ì§€ë³´ìˆ˜ì„±:</strong> í…Œë§ˆ ë³€ê²½ ì‹œ í•˜ë‚˜ì˜ íŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ ì „ì²´ ì ìš©</li>
                <li><strong>ë‹¤í¬ ëª¨ë“œ:</strong> CSS ë³€ìˆ˜ë§Œ ë³€ê²½í•˜ì—¬ ì‰½ê²Œ ë‹¤í¬ í…Œë§ˆ êµ¬í˜„</li>
                <li><strong>í™•ì¥ì„±:</strong> ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ ì¶”ê°€ ì‹œ ê¸°ì¡´ í…Œë§ˆ ìë™ ì ìš©</li>
                <li><strong>ì„±ëŠ¥:</strong> CSS-in-JSì™€ í…Œë§ˆ ë³€ìˆ˜ì˜ íš¨ìœ¨ì ì¸ ì¡°í•©</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ êµ¬í˜„ëœ ëª¨ë“ˆ êµ¬ì¡°</h2>
        <div class="variable-display">
ThemeSystem.js
â”œâ”€â”€ base (ê¸°ë³¸ ìƒ‰ìƒ íŒ”ë ˆíŠ¸, íƒ€ì´í¬ê·¸ë˜í”¼, spacing)
â”œâ”€â”€ light (ë¼ì´íŠ¸ í…Œë§ˆ ë³€ìˆ˜)
â”œâ”€â”€ dark (ë‹¤í¬ í…Œë§ˆ ë³€ìˆ˜)
â”œâ”€â”€ formControls (í¼ ì»¨íŠ¸ë¡¤ ê³µí†µ ë³€ìˆ˜)
â”œâ”€â”€ validation (ê²€ì¦ ìƒíƒœ ë³€ìˆ˜)
â”œâ”€â”€ formCheck (Radio/Checkbox ë³€ìˆ˜)
â”œâ”€â”€ datepicker (Datepicker ì „ìš© ë³€ìˆ˜)
â””â”€â”€ all (ëª¨ë“  í…Œë§ˆ í†µí•©)

FormControlStyles.js â†’ ThemeSystem.formControls ì‚¬ìš©
ValidationStyles.js â†’ ThemeSystem.validation ì‚¬ìš©
RadioCheckboxStyles.js â†’ ThemeSystem.formCheck ì‚¬ìš©
DatepickerStyles.js â†’ ThemeSystem.datepicker ì‚¬ìš©
        </div>
    </div>
</body>
</html>